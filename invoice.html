<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ù†Ø¸Ø§Ù… ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</title>

<style>
:root{font-size:16px}
body{margin:0;font-family:Tahoma;background:#f1f3f6;direction:rtl}
.header{background:#1f4e79;color:#fff;padding:12px;text-align:center;font-size:20px}
.container{padding:10px}
.card{background:#fff;border-radius:6px;padding:10px;margin-bottom:10px;box-shadow:0 1px 3px rgba(0,0,0,.1)}
label{font-size:13px}
input{width:100%;padding:6px;margin:4px 0}
button{padding:8px;margin:3px;font-size:14px}
table{width:100%;border-collapse:collapse;font-size:13px}
th,td{border:1px solid #ccc;padding:5px;text-align:center}
th{background:#e8eef5}
.summary{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.summary div{background:#f8f9fb;border:1px solid #ccc;border-radius:5px;padding:10px;text-align:center}
.summary span{font-size:18px;font-weight:bold;color:#1f4e79}
.actions{display:flex;flex-wrap:wrap;gap:5px}
</style>
</head>

<body>

<div class="header">Ù†Ø¸Ø§Ù… ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ â€“ ÙƒÙ‡Ø±Ø¨Ø§Ø¡</div>

<div class="container">

<div class="card">
<label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</label>
<input id="client">
<label>Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
<input id="project">
</div>

<div class="card actions">
<button onclick="exportData()">ğŸ“¤ ØªØµØ¯ÙŠØ±</button>
<button onclick="importData()">ğŸ“¥ Ø§Ø³ØªÙŠØ±Ø§Ø¯</button>
<button onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
<button onclick="fontUp()">A+</button>
<button onclick="fontDown()">A-</button>
<button onclick="camera.click()">ğŸ“· Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
<input type="file" id="camera" accept="image/*" capture style="display:none">
<input type="file" id="file" style="display:none">
</div>

<div class="card">
<table id="table">
<tr>
<th>#</th><th>Ø§Ù„ØªÙØ§ØµÙŠÙ„</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„Ù†Ù‚Ø§Ø·</th><th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
</tr>
</table>
</div>

<div class="card summary">
<div>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ<span id="grand">0</span></div>
<div>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ<span id="remain">0</span></div>
</div>

<div class="card">
<label>Ø§Ù„Ù…ÙØ³Ù„Ù‘ÙÙ… Ù„Ù†Ø§</label>
<input id="paid" oninput="calcAll()">
</div>

</div>

<script>
const items=[
["Ø¥Ù†Ø§Ø±Ø© Ø¹Ø§Ø¯ÙŠØ© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ù„ÙƒÙ„ Ù„Ù…Ø¨Ø©",1000],
["Ù…Ø£Ø®Ø° ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ù…Ø¹ Ø§Ù„ØªØ£Ø±ÙŠØ¶",2000],
["Ù…Ø£Ø®Ø° Ø§Ù„ØªÙ„ÙØ²ÙŠÙˆÙ†",4000],
["Ù…Ø£Ø®Ø° Ø§Ù„ØªÙ„ÙÙˆÙ†",2000],
["Ù…Ø£Ø®Ø° Ø³Ø®Ø§Ù†Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¡",2000],
["Ù…Ø£Ø®Ø° Ù…Ø±Ø§ÙˆØ­ Ø´ÙØ·",2000],
["Ù‚ÙˆØ§Ø·Ø¹ Ø§Ù„Ø·Ø¨Ù„ÙˆÙ†",2000],
["Ù„Ù…Ø¨Ø§Øª Ù„Ø·Ø´",2000],
["Ø®Ø·ÙˆØ· Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡",1000],
["Ø®Ø·ÙˆØ· Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©",1000],
["Ù‚Øµ ÙˆØªØ±ÙƒÙŠØ¨ Ù…Ø³Ø§Ø·Ø± Ø¨Ø±ÙˆÙØ§ÙŠÙ„",2500],
["Ù‚Ø³Ø§Ù…Ø§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¡ ØµØºÙŠØ±Ø©",2000],
["Ù‚Ø³Ø§Ù…Ø§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¡ ÙƒØ¨ÙŠØ±Ø©",3000],
["ÙÙˆØ§Ù†ÙŠØ³ Ø¬Ø¯Ø§Ø±ÙŠØ©",2000],
["Ø¨Ø±Ù…Ø¬Ø© Ù„ÙˆØ­Ø© Ø§Ù„Ø·Ø¨Ù„ÙˆÙ†",10000],
["ØªØ±ÙƒÙŠØ¨ Ù…Ø±Ø§ÙˆØ­ Ø³Ù‚Ù",3000],
["Ù‚Øµ ÙˆØªÙƒØ³ÙŠØ± ÙˆØªÙ…Ø¯ÙŠØ¯ Ù„ÙŠØ§Øª",50000]
];

const table=document.getElementById("table");
items.forEach((it,i)=>{
 let r=table.insertRow();
 r.innerHTML=`<td>${i+1}</td><td>${it[0]}</td><td>${it[1]}</td>
 <td><input type="number" value="0" oninput="calcAll()"></td>
 <td class="sum">0</td>`;
});

function calcAll(){
 let total=0;
 document.querySelectorAll("#table tr").forEach((r,i)=>{
  if(i===0)return;
  let p=+r.cells[2].innerText;
  let q=r.cells[3].children[0].value||0;
  let s=p*q;
  r.cells[4].innerText=s;
  total+=s;
 });
 grand.innerText=total;
 remain.innerText=total-(paid.value||0);
}

function exportData(){
 let data={
  client:client.value,
  project:project.value,
  paid:paid.value,
  items:[...document.querySelectorAll("#table tr")].slice(1).map(r=>r.cells[3].children[0].value)
 };
 let a=document.createElement("a");
 a.href=URL.createObjectURL(new Blob([JSON.stringify(data)],{type:"application/json"}));
 a.download="invoice.json";
 a.click();
}

function importData(){
 file.onchange=e=>{
  let r=new FileReader();
  r.onload=()=>{
   let d=JSON.parse(r.result);
   client.value=d.client;
   project.value=d.project;
   paid.value=d.paid;
   document.querySelectorAll("#table tr").forEach((r,i)=>{
    if(i>0)r.cells[3].children[0].value=d.items[i-1]||0;
   });
   calcAll();
  };
  r.readAsText(e.target.files[0]);
 };
 file.click();
}

function fontUp(){document.documentElement.style.fontSize=(parseInt(getComputedStyle(document.documentElement).fontSize)+1)+"px"}
function fontDown(){document.documentElement.style.fontSize=(parseInt(getComputedStyle(document.documentElement).fontSize)-1)+"px"}
</script>

</body>
</html>